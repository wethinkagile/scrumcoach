{
  "version": 3,
  "sources": ["../../ws/browser.js", "../../puppeteer-core/src/node/NodeWebSocketTransport.ts", "../../puppeteer-core/src/generated/version.ts"],
  "sourcesContent": ["'use strict';\n\nmodule.exports = function () {\n  throw new Error(\n    'ws does not work in the browser. Browser clients must use the native ' +\n      'WebSocket object'\n  );\n};\n", "/**\n * @license\n * Copyright 2018 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport NodeWebSocket from 'ws';\n\nimport type {ConnectionTransport} from '../common/ConnectionTransport.js';\nimport {packageVersion} from '../generated/version.js';\n\n/**\n * @internal\n */\nexport class NodeWebSocketTransport implements ConnectionTransport {\n  static create(\n    url: string,\n    headers?: Record<string, string>\n  ): Promise<NodeWebSocketTransport> {\n    return new Promise((resolve, reject) => {\n      const ws = new NodeWebSocket(url, [], {\n        followRedirects: true,\n        perMessageDeflate: false,\n        maxPayload: 256 * 1024 * 1024, // 256Mb\n        headers: {\n          'User-Agent': `Puppeteer ${packageVersion}`,\n          ...headers,\n        },\n      });\n\n      ws.addEventListener('open', () => {\n        return resolve(new NodeWebSocketTransport(ws));\n      });\n      ws.addEventListener('error', reject);\n    });\n  }\n\n  #ws: NodeWebSocket;\n  onmessage?: (message: NodeWebSocket.Data) => void;\n  onclose?: () => void;\n\n  constructor(ws: NodeWebSocket) {\n    this.#ws = ws;\n    this.#ws.addEventListener('message', event => {\n      setImmediate(() => {\n        if (this.onmessage) {\n          this.onmessage.call(null, event.data);\n        }\n      });\n    });\n    this.#ws.addEventListener('close', () => {\n      setImmediate(() => {\n        if (this.onclose) {\n          this.onclose.call(null);\n        }\n      });\n    });\n    // Silently ignore all errors - we don't know what to do with them.\n    this.#ws.addEventListener('error', () => {});\n  }\n\n  send(message: string): void {\n    this.#ws.send(message);\n  }\n\n  close(): void {\n    this.#ws.close();\n  }\n}\n", "/**\n * @internal\n */\nexport const packageVersion = '22.10.0';\n"],
  "mappings": ";;;;;;;;;;AAAA;AAAA;AAAA;AAEA,WAAO,UAAU,WAAY;AAC3B,YAAM,IAAI;AAAA,QACR;AAAA,MAEF;AAAA,IACF;AAAA;AAAA;;;ACFA,gBAA0B;;;ACFnB,IAAM,iBAAiB;;;ADH9B;AAaM,IAAO,0BAAP,MAAO,wBAAsB;EA2BjC,YAAY,IAAiB;AAJ7B;AACA;AACA;AAGE,uBAAK,KAAM;AACX,uBAAK,KAAI,iBAAiB,WAAW,WAAQ;AAC3C,mBAAa,MAAK;AAChB,YAAI,KAAK,WAAW;AAClB,eAAK,UAAU,KAAK,MAAM,MAAM,IAAI;QACtC;MACF,CAAC;IACH,CAAC;AACD,uBAAK,KAAI,iBAAiB,SAAS,MAAK;AACtC,mBAAa,MAAK;AAChB,YAAI,KAAK,SAAS;AAChB,eAAK,QAAQ,KAAK,IAAI;QACxB;MACF,CAAC;IACH,CAAC;AAED,uBAAK,KAAI,iBAAiB,SAAS,MAAK;IAAE,CAAC;EAC7C;EA5CA,OAAO,OACL,KACA,SAAgC;AAEhC,WAAO,IAAI,QAAQ,CAAC,SAAS,WAAU;AACrC,YAAM,KAAK,IAAI,UAAAA,QAAc,KAAK,CAAA,GAAI;QACpC,iBAAiB;QACjB,mBAAmB;QACnB,YAAY,MAAM,OAAO;;QACzB,SAAS;UACP,cAAc,aAAa,cAAc;UACzC,GAAG;;OAEN;AAED,SAAG,iBAAiB,QAAQ,MAAK;AAC/B,eAAO,QAAQ,IAAI,wBAAuB,EAAE,CAAC;MAC/C,CAAC;AACD,SAAG,iBAAiB,SAAS,MAAM;IACrC,CAAC;EACH;EA0BA,KAAK,SAAe;AAClB,uBAAK,KAAI,KAAK,OAAO;EACvB;EAEA,QAAK;AACH,uBAAK,KAAI,MAAK;EAChB;;AA9BA;AAvBI,IAAO,yBAAP;",
  "names": ["NodeWebSocket"]
}
