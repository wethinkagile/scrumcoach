import {
  __commonJS,
  __privateAdd,
  __privateGet,
  __privateSet,
  __publicField,
  __toESM
} from "./chunk-5EEVNGTZ.js";

// node_modules/ws/browser.js
var require_browser = __commonJS({
  "node_modules/ws/browser.js"(exports, module) {
    "use strict";
    module.exports = function() {
      throw new Error(
        "ws does not work in the browser. Browser clients must use the native WebSocket object"
      );
    };
  }
});

// node_modules/puppeteer-core/lib/esm/puppeteer/node/NodeWebSocketTransport.js
var import_ws = __toESM(require_browser(), 1);

// node_modules/puppeteer-core/lib/esm/puppeteer/generated/version.js
var packageVersion = "22.10.0";

// node_modules/puppeteer-core/lib/esm/puppeteer/node/NodeWebSocketTransport.js
var _ws;
var _NodeWebSocketTransport = class _NodeWebSocketTransport {
  constructor(ws) {
    __privateAdd(this, _ws, void 0);
    __publicField(this, "onmessage");
    __publicField(this, "onclose");
    __privateSet(this, _ws, ws);
    __privateGet(this, _ws).addEventListener("message", (event) => {
      setImmediate(() => {
        if (this.onmessage) {
          this.onmessage.call(null, event.data);
        }
      });
    });
    __privateGet(this, _ws).addEventListener("close", () => {
      setImmediate(() => {
        if (this.onclose) {
          this.onclose.call(null);
        }
      });
    });
    __privateGet(this, _ws).addEventListener("error", () => {
    });
  }
  static create(url, headers) {
    return new Promise((resolve, reject) => {
      const ws = new import_ws.default(url, [], {
        followRedirects: true,
        perMessageDeflate: false,
        maxPayload: 256 * 1024 * 1024,
        // 256Mb
        headers: {
          "User-Agent": `Puppeteer ${packageVersion}`,
          ...headers
        }
      });
      ws.addEventListener("open", () => {
        return resolve(new _NodeWebSocketTransport(ws));
      });
      ws.addEventListener("error", reject);
    });
  }
  send(message) {
    __privateGet(this, _ws).send(message);
  }
  close() {
    __privateGet(this, _ws).close();
  }
};
_ws = new WeakMap();
var NodeWebSocketTransport = _NodeWebSocketTransport;

export {
  NodeWebSocketTransport
};
/*! Bundled license information:

puppeteer-core/lib/esm/puppeteer/node/NodeWebSocketTransport.js:
  (**
   * @license
   * Copyright 2018 Google Inc.
   * SPDX-License-Identifier: Apache-2.0
   *)
*/
//# sourceMappingURL=chunk-7A4YSGFJ.js.map
